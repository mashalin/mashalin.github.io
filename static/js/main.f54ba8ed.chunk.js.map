{"version":3,"sources":["Components/UI/myModal/MyModal.module.css","Components/UI/button/MyButton.module.css","Components/UI/input/MyInput.module.css","Components/UI/Loader/Loader.module.css","Components/UI/select/MySelect.module.css","context/index.js","Components/UI/button/MyButton.js","Components/UI/navbar/Navbar.js","pages/About.js","pages/Error.js","Components/UI/input/MyInput.js","pages/Login.js","API/PostService.js","Components/UI/Loader/Loader.js","hooks/useFetching.js","pages/PostIdPage.js","Components/PostItem.js","Components/PostList.js","Components/PostForm.js","Components/UI/select/MySelect.js","Components/PostFilter.js","Components/UI/myModal/MyModal.js","hooks/usePosts.js","utils/pages.js","Components/UI/pagination/Pagination.js","pages/Posts.js","router/routes.js","hooks/useObserver.js","Components/AppRouter.js","Components/App.js","reportWebVitals.js","index.js"],"names":["module","exports","AuthContext","createContext","MyButton","children","props","className","classes","myBtn","Navbar","setIsAuth","useContext","onClick","localStorage","removeItem","to","About","Error","style","color","textAlign","MyInput","myInput","type","Login","onSubmit","e","preventDefault","setItem","placeholder","PostService","limit","page","axios","get","params","_limit","_page","response","id","Loader","loader","useFetching","callback","useState","isLoading","setIsLoading","error","setError","fetching","a","message","PostIdPage","useParams","post","setPost","comments","setComments","getById","data","fetchPostById","getCommentsByPostId","fetchComments","isComLoading","useEffect","title","map","comm","marginTop","email","body","PostItem","router","useHistory","number","push","remove","PostList","posts","length","index","PostForm","create","value","onChange","target","newPost","Date","now","MySelect","options","defaultValue","mySel","disabled","option","name","PostFilter","filter","setFilter","query","sort","selectedSort","MyModal","visible","setVisible","rootClasses","myModal","active","join","stopPropagation","myModalContent","usePosts","sortedPosts","useMemo","b","localeCompare","useSortedPosts","toLowerCase","includes","getPageCount","totalCount","Math","ceil","getPagesArray","totalPages","result","i","Pagination","changePage","pagesArray","p","Posts","privateRoutes","path","component","exact","setPosts","modal","setModal","sortedAndSearchedPosts","setTotalPages","setPage","lastElement","useRef","getAll","headers","fetchPosts","isPostsLoading","postError","ref","canLoad","observer","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","useObserver","margin","display","justifyContent","pablicRoutes","AppRouter","isAuth","route","App","setLoading","getItem","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f54ba8ed.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"myModal\":\"MyModal_myModal__23g5z\",\"myModalContent\":\"MyModal_myModalContent__1Xn3v\",\"active\":\"MyModal_active__39emU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myBtn\":\"MyButton_myBtn__645_M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myInput\":\"MyInput_myInput__3YB3k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3xMPB\",\"rotate\":\"Loader_rotate__jDmrw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mySel\":\"MySelect_mySel__CN3zR\"};","import { createContext } from \"react\";\r\n\r\nexport const AuthContext = createContext(null);","import React from \"react\";\r\nimport classes from './MyButton.module.css';\r\n\r\nfunction MyButton ({children, ...props}) {\r\n    return(\r\n        <button {...props} className={classes.myBtn}> \r\n            {children}\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default MyButton;","import React, { useContext } from \"react\";\r\nimport {Link} from 'react-router-dom';\r\nimport { AuthContext } from \"../../../context\";\r\nimport MyButton from \"../button/MyButton\";\r\n\r\nfunction Navbar() {\r\n   const {setIsAuth} = useContext(AuthContext);\r\n\r\n  const logout = () => {\r\n    setIsAuth(false);\r\n    localStorage.removeItem('auth');\r\n  }\r\n\r\n    return(\r\n      <div className='navbar' >\r\n        <MyButton onClick={logout}>\r\n          Выйти\r\n         </MyButton>\r\n        <div className=\"navbar__links\">\r\n          <Link className='navbar__link' to=\"/about\">О сайте</Link>\r\n          <Link className='navbar__link' to=\"/posts\">Посты</Link>\r\n        </div>\r\n       </div>\r\n    );\r\n}\r\n\r\nexport default Navbar;","import React from \"react\";\r\n\r\nfunction About() {\r\n    return(\r\n        <div className='about'>\r\n            <h4>\r\n              This is a website about JS posts\r\n            </h4>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default About;","import React from \"react\";\r\n\r\nfunction Error() {\r\n    return(\r\n        <h1 style={{color: 'red', textAlign: 'center'}}>\r\n            Вы перешли на несуществующую страницу!\r\n        </h1>\r\n    );\r\n}\r\n\r\nexport default Error;","import React from \"react\";\r\nimport classes from './MyInput.module.css'\r\n\r\nfunction MyInput (props) {\r\n    return(\r\n       <input className={classes.myInput} {...props} type=\"text\"/>\r\n\r\n      \r\n    );\r\n}\r\n\r\nexport default MyInput;","import React, { useContext } from \"react\";\r\nimport MyButton from \"../Components/UI/button/MyButton\";\r\nimport MyInput from \"../Components/UI/input/MyInput\";\r\nimport { AuthContext } from \"../context\";\r\n\r\nfunction Login() {\r\n\r\n    const { setIsAuth} = useContext(AuthContext);\r\n\r\n    const login = e => {\r\n        e.preventDefault();\r\n        setIsAuth(true);\r\n        localStorage.setItem('auth', 'true');\r\n    }\r\n\r\n    return(\r\n        <div>\r\n           <h2 className='login-title'>Войдите чтобы продолжить</h2>\r\n           <form onSubmit={login}>\r\n              <div className=\"login-inputs\">\r\n              <MyInput type=\"text\" placeholder='Введите логин' />\r\n               <MyInput type=\"password\" placeholder='Введите пароль' />\r\n              </div>\r\n               <MyButton>Войти</MyButton>\r\n           </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import axios from 'axios';\r\n\r\nexport default class PostService {\r\n    static async getAll(limit = 10, page = 1) {\r\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\r\n            params: {\r\n                _limit: limit,\r\n                _page: page\r\n            }\r\n        });\r\n        return response;\r\n        \r\n    }\r\n\r\n    static async getById(id) {\r\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts/' + id);\r\n        return response;\r\n        \r\n    }\r\n\r\n    static async getCommentsByPostId(id) {\r\n        const response = await axios.get(`https://jsonplaceholder.typicode.com/posts/${id}/comments`);\r\n        return response;\r\n        \r\n    }\r\n}","import React from \"react\";\r\nimport classes from './Loader.module.css'\r\n\r\nfunction Loader () {\r\n    return(\r\n       <div className={classes.loader}>\r\n\r\n       </div>\r\n    );\r\n}\r\n\r\nexport default Loader;","import { useState } from \"react\"\r\n\r\nexport const useFetching = (callback) => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const fetching = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            await callback();\r\n        } catch (e) {\r\n            setError(e.message);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n    return [fetching, isLoading, error]\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport {useParams} from 'react-router-dom';\r\nimport PostService from \"../API/PostService\";\r\nimport Loader from \"../Components/UI/Loader/Loader\";\r\nimport { useFetching } from \"../hooks/useFetching\";\r\n\r\nfunction PostIdPage() {\r\n    const params = useParams();\r\n    const [post, setPost] = useState({});\r\n    const [comments, setComments] = useState([]);\r\n    const [fetchPostById, isLoading, error] = useFetching( async () => {\r\n        const response = await PostService.getById(params.id);\r\n        setPost(response.data);\r\n    })\r\n\r\n    const [fetchComments, isComLoading, comError] = useFetching( async () => {\r\n        const response = await PostService.getCommentsByPostId(params.id);\r\n        setComments(response.data);\r\n    })\r\n\r\n    useEffect( () => {\r\n        fetchPostById(params.id);\r\n        fetchComments(params.id);\r\n    }, [])\r\n    return(\r\n        <div className='PostIdPage'>\r\n           <h2 className='comm-post'>Вы открыли пост № {params.id}</h2>\r\n           \r\n           {isLoading\r\n           ? <Loader/>\r\n           : <div>{post.id}. {post.title} </div>\r\n           }\r\n           <h2 className='comments'>Комментарии:</h2>\r\n           {isComLoading\r\n           ? <Loader/>\r\n           : <div>\r\n               {comments.map(comm =>\r\n                <div className='comment' key={comm.id} style={{marginTop: '15px'}}>\r\n                    <h5>{comm.email}</h5>\r\n                    <div>{comm.body}</div>\r\n                </div>\r\n                )}\r\n           </div>\r\n\r\n           }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PostIdPage;","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport MyButton from \"./UI/button/MyButton\";\r\n\r\nfunction PostItem(props) {\r\n   const router = useHistory();\r\n\r\n   return(\r\n    <div className=\"post\">\r\n      <div className=\"post__content\">\r\n         <strong>{props.number}. {props.post.title}</strong>\r\n         <div>{props.post.body}</div>\r\n       </div>\r\n      <div className=\"post__btns\">\r\n      <MyButton onClick={() => router.push(`/posts/${props.post.id}`)}>Открыть</MyButton>\r\n         <MyButton onClick={() => props.remove(props.post)}>Удалить</MyButton>\r\n      </div>\r\n  </div>\r\n   );\r\n}\r\n\r\nexport default PostItem;","import React from \"react\";\r\nimport PostItem from './PostItem';\r\n\r\n\r\nfunction PostList ({posts, title, remove}) {\r\n\r\n    if (!posts.length) {\r\n        return(\r\n            <h1 style={{textAlign: 'center'}} >\r\n                Посты не найдены!\r\n            </h1>\r\n        );\r\n    }\r\n\r\n    return(\r\n        <div>\r\n          <h1 style={{textAlign: 'center'}}>\r\n            {title}\r\n          </h1>\r\n        {posts.map((post, index) =>\r\n              <PostItem remove={remove} key={post.id} number={index + 1} post={post}/> \r\n          )}\r\n        \r\n      </div>\r\n    );\r\n}\r\n\r\nexport default PostList;","import React, {useState} from \"react\";\r\nimport MyButton from './UI/button/MyButton';\r\nimport MyInput from './UI/input/MyInput';\r\n\r\nfunction PostForm({create}) {\r\n\r\n    const [post, setPost] = useState({title: '', body: ''});\r\n\r\n    const addNewPost = (e) => {\r\n        e.preventDefault();\r\n        const newPost = {\r\n            ...post,\r\n            id: Date.now(),\r\n        }\r\n        create(newPost);\r\n        setPost({title: '', body: ''});\r\n      }\r\n\r\n    return(\r\n        <form>\r\n          <MyInput value={post.title} onChange={e => setPost({...post, title: e.target.value})} type=\"text\" placeholder=\"Название поста\" />\r\n          <MyInput value={post.body} onChange={e => setPost({...post, body: e.target.value})} type=\"text\" placeholder=\"Описание поста\" />\r\n          <MyButton onClick={addNewPost}>Создать пост</MyButton>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default PostForm;","import React from \"react\";\r\nimport classes from './MySelect.module.css'\r\n\r\nfunction MySelect({options, defaultValue, value, onChange}) {\r\n    return(\r\n        <select className={classes.mySel} value={value} onChange={e => onChange(e.target.value)} >\r\n            <option disabled value=\"\">{defaultValue}</option>\r\n            {options.map(option =>\r\n                <option key={option.value} value={option.value}>\r\n                    {option.name}\r\n                </option>\r\n                )}\r\n        </select>\r\n    );\r\n}\r\n\r\nexport default MySelect;","import React from \"react\";\r\nimport MySelect from './UI/select/MySelect';\r\nimport MyInput from './UI/input/MyInput';\r\n\r\nfunction PostFilter({filter, setFilter}) {\r\n    return(\r\n        <div>\r\n            <MyInput\r\n         placeholder=\"Поиск...\"\r\n         value={filter.query}\r\n         onChange={e => setFilter({...filter, query: e.target.value})}\r\n        />\r\n\r\n        <MySelect\r\n        value={filter.sort}\r\n        onChange={selectedSort => setFilter({...filter, sort: selectedSort})}\r\n        defaultValue=\"Сортировка\"\r\n        options={[\r\n          {value: 'title', name: 'По названию'},\r\n          {value: 'body', name: 'По описанию'},\r\n\r\n        ]}\r\n        />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PostFilter;","import React from \"react\";\r\nimport classes from './MyModal.module.css';\r\n\r\nfunction MyModal({children, visible, setVisible}) {\r\n\r\n    const rootClasses = [classes.myModal];\r\n\r\n    if (visible) {\r\n        rootClasses.push(classes.active);\r\n    }\r\n\r\n    return(\r\n        <div onClick={() => setVisible(false)} className={rootClasses.join(' ')}>\r\n            <div onClick={(e) => e.stopPropagation()} className={classes.myModalContent}>\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MyModal;","import {useMemo} from 'react';\r\n\r\nexport const useSortedPosts = (posts, sort) => {\r\n    const sortedPosts = useMemo( () => {\r\n        if (sort) {\r\n          return  [...posts].sort((a,b) => a[sort].localeCompare(b[sort]));\r\n        }\r\n        return posts;\r\n      }, [sort, posts]);\r\n      return sortedPosts\r\n}\r\n\r\nexport const usePosts = (posts, sort, query) => {\r\n    const sortedPosts = useSortedPosts(posts, sort);\r\n\r\n    const sortedAndSearchedPosts = useMemo( () => {\r\n        return sortedPosts.filter(post => post.title.toLowerCase().includes(query.toLowerCase()));\r\n    \r\n      }, [query, sortedPosts]);\r\n      return sortedAndSearchedPosts;\r\n}","export const getPageCount = (totalCount, limit) => {\r\n    return Math.ceil(totalCount/limit);\r\n}\r\n\r\nexport const getPagesArray = (totalPages) => {\r\n    let result = [];\r\n    for (let i = 0; i < totalPages; i++) {\r\n        result.push(i + 1);\r\n    }\r\n    return result;\r\n}","import React from \"react\";\r\nimport { getPagesArray } from \"../../../utils/pages\";\r\n\r\n\r\nfunction Pagination ({totalPages, page, changePage}) {\r\n    const pagesArray = getPagesArray(totalPages);\r\n    return(\r\n      <div className=\"page__wrapper\" >\r\n        {pagesArray.map(p => \r\n          <span onClick={() => changePage(p)} key={p} className={page === p ? 'page page__current' : 'page'}>{p}</span>\r\n          )}\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default Pagination;","import React, {useState, useEffect, useRef} from 'react';\r\nimport '../styles/App.scss';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport PostList from '../Components/PostList';\r\nimport PostForm from '../Components/PostForm';\r\nimport PostFilter from '../Components/PostFilter';\r\nimport MyModal from '../Components/UI/myModal/MyModal';\r\nimport MyButton from '../Components/UI/button/MyButton';\r\nimport { usePosts } from '../hooks/usePosts';\r\nimport PostService from '../API/PostService';\r\nimport Loader from '../Components/UI/Loader/Loader';\r\nimport { useFetching } from '../hooks/useFetching';\r\nimport { getPageCount, getPagesArray } from '../utils/pages';\r\nimport Pagination from '../Components/UI/pagination/Pagination';\r\nimport { useObserver } from '../hooks/useObserver';\r\n\r\n\r\nfunction Posts() {\r\n\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  const [filter, setFilter] = useState({sort: '', query: ''});\r\n  const [modal, setModal] = useState(false);\r\n  const sortedAndSearchedPosts = usePosts(posts, filter.sort, filter.query);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [limit, setLimit] = useState(10);\r\n  const [page, setPage] = useState(1);\r\n  const lastElement = useRef();\r\n\r\n  const pagesArray = getPagesArray(totalPages);\r\n\r\n\r\n  const [fetchPosts, isPostsLoading, postError] = useFetching( async () => {\r\n    const response = await PostService.getAll(limit, page);\r\n    setPosts([...posts, ...response.data]);\r\n    const totalCount = response.headers['x-total-count'];\r\n    setTotalPages(getPageCount(totalCount, limit));\r\n  })\r\n\r\n  useObserver(lastElement, page < totalPages, isPostsLoading, () => {\r\n    setPage(page + 1);\r\n  })\r\n\r\n\r\n  useEffect(() => {\r\n    fetchPosts();\r\n  }, [page]);\r\n\r\n  const createPost = (newPost) => {\r\n    setPosts([...posts, newPost]);\r\n    setModal(false);\r\n  }\r\n\r\n  function removePost(post) {\r\n    setPosts(posts.filter(p => p.id !== post.id));\r\n  }\r\n\r\n  const changePage = (page) => {\r\n    setPage(page);\r\n  }\r\n\r\n\r\n  return(\r\n    <div className=\"App\">\r\n      \r\n        <MyButton style={{marginTop: '30px'}} onClick={() => setModal(true)} >\r\n          Создать пост\r\n        </MyButton>\r\n        <MyModal visible={modal} setVisible={setModal}>\r\n           <PostForm create={createPost}/>\r\n        </MyModal>\r\n\r\n        <hr style={{margin: '15px 0'}} />\r\n        \r\n        <PostFilter\r\n         filter={filter}\r\n         setFilter={setFilter}\r\n        />\r\n\r\n      {postError &&\r\n          <h1>Произошла ошибка {postError}</h1>\r\n      }\r\n      <PostList remove={removePost} posts={sortedAndSearchedPosts} title=\"Посты про JS\"/>\r\n        <div ref={lastElement}></div>\r\n        {isPostsLoading &&\r\n          <div style={{display: 'flex', justifyContent: 'center', marginTop: '50px'}}><Loader/></div>\r\n        }\r\n         \r\n         \r\n      \r\n     <Pagination page={page} changePage={changePage} totalPages={totalPages}/>\r\n       \r\n  \r\n     \r\n  </div>\r\n  );\r\n}\r\n\r\nexport default Posts;\r\n","import About from \"../pages/About\";\r\nimport Error from \"../pages/Error\";\r\nimport Login from \"../pages/Login\";\r\nimport PostIdPage from \"../pages/PostIdPage\";\r\nimport Posts from \"../pages/Posts\";\r\n\r\nexport const privateRoutes = [\r\n    {path: '/about', component: About, exact: true},\r\n    {path: '/posts', component: Posts, exact: true},\r\n    {path: '/posts/:id', component: PostIdPage, exact: true},\r\n    {path: '/error', component: Error, exact: false},\r\n\r\n]\r\n\r\nexport const pablicRoutes = [\r\n    {path: '/login', component: Login, exact: true},\r\n]","import { useRef, useEffect } from \"react\";\r\n\r\n\r\n\r\nexport const useObserver = (ref, canLoad, isLoading, callback) => {\r\n    const observer = useRef();\r\n    useEffect(() => {\r\n\r\n        if(isLoading) return;\r\n        if(observer.current) observer.current.disconnect();\r\n        let cb = function(entries, observer) {\r\n          if (entries[0].isIntersecting && canLoad) {\r\n            callback();\r\n          }\r\n        }\r\n        observer.current = new IntersectionObserver(cb);\r\n        observer.current.observe(ref.current);\r\n       \r\n      }, [isLoading]);\r\n}","import React, { useContext } from \"react\";\r\nimport {Switch, Route, Redirect} from 'react-router-dom';\r\nimport { AuthContext } from \"../context\";\r\nimport { pablicRoutes, privateRoutes } from \"../router/routes\";\r\nimport Loader from \"./UI/Loader/Loader\";\r\n\r\nfunction AppRouter() {\r\n    const {isAuth, isLoading} = useContext(AuthContext);\r\n\r\n    if (isLoading) {\r\n        return <Loader/>\r\n    }\r\n\r\n    return(\r\n         isAuth\r\n            ?\r\n            <Switch>\r\n            {privateRoutes.map(route => \r\n                <Route\r\n                     component={route.component}\r\n                     path={route.path}\r\n                     exact={route.exact}\r\n                     key={route.path}\r\n                />\r\n            )}\r\n             <Redirect to='/posts'/>\r\n         </Switch>\r\n\r\n            :\r\n            <Switch>\r\n            {pablicRoutes.map(route => \r\n                <Route\r\n                     component={route.component}\r\n                     path={route.path}\r\n                     exact={route.exact}\r\n                     key={route.path}\r\n                />\r\n            )}\r\n             <Redirect to='/login'/>\r\n         </Switch>\r\n       \r\n    );\r\n}\r\n\r\nexport default AppRouter;","import React, { useEffect, useState } from 'react';\nimport '../styles/App.scss';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { BrowserRouter} from 'react-router-dom';\nimport Navbar from './UI/navbar/Navbar';\nimport AppRouter from './AppRouter';\nimport { AuthContext } from '../context';\n\n\n\nfunction App() {\n  const [isAuth, setIsAuth] = useState(false);\n  const [isLoading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if(localStorage.getItem('auth')) {\n      setIsAuth(true);\n    }\n    setLoading(false);\n  }, [])\n\n  return(\n    <AuthContext.Provider value={{\n      isAuth,\n      setIsAuth,\n      isLoading\n    }}>\n      <BrowserRouter>\n        <Navbar/>\n       <AppRouter/>\n       \n    </BrowserRouter>\n    </AuthContext.Provider>\n    \n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './Components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  \n    <App />,\n  document.getElementById('root')\n);\n\n\nreportWebVitals();\n"],"sourceRoot":""}