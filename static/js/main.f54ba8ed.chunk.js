(this["webpackJsonptag-app"]=this["webpackJsonptag-app"]||[]).push([[0],{21:function(e,t,n){e.exports={myModal:"MyModal_myModal__23g5z",myModalContent:"MyModal_myModalContent__1Xn3v",active:"MyModal_active__39emU"}},25:function(e,t,n){},36:function(e,t,n){e.exports={myBtn:"MyButton_myBtn__645_M"}},39:function(e,t,n){e.exports={myInput:"MyInput_myInput__3YB3k"}},42:function(e,t,n){e.exports={loader:"Loader_loader__3xMPB",rotate:"Loader_rotate__jDmrw"}},43:function(e,t,n){e.exports={mySel:"MySelect_mySel__CN3zR"}},49:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(35),a=n.n(r),s=(n(49),n(3)),o=(n(25),n(26),n(12)),i=Object(c.createContext)(null),u=n(6),j=n(44),l=n(36),b=n.n(l),d=n(0),p=["children"];var O=function(e){var t=e.children,n=Object(j.a)(e,p);return Object(d.jsx)("button",Object(u.a)(Object(u.a)({},n),{},{className:b.a.myBtn,children:t}))};var h=function(){var e=Object(c.useContext)(i).setIsAuth;return Object(d.jsxs)("div",{className:"navbar",children:[Object(d.jsx)(O,{onClick:function(){e(!1),localStorage.removeItem("auth")},children:"\u0412\u044b\u0439\u0442\u0438"}),Object(d.jsxs)("div",{className:"navbar__links",children:[Object(d.jsx)(o.b,{className:"navbar__link",to:"/about",children:"\u041e \u0441\u0430\u0439\u0442\u0435"}),Object(d.jsx)(o.b,{className:"navbar__link",to:"/posts",children:"\u041f\u043e\u0441\u0442\u044b"})]})]})},f=n(2);var v=function(){return Object(d.jsx)("div",{className:"about",children:Object(d.jsx)("h4",{children:"This is a website about JS posts"})})};var x=function(){return Object(d.jsx)("h1",{style:{color:"red",textAlign:"center"},children:"\u0412\u044b \u043f\u0435\u0440\u0435\u0448\u043b\u0438 \u043d\u0430 \u043d\u0435\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!"})},m=n(39),g=n.n(m);var y=function(e){return Object(d.jsx)("input",Object(u.a)(Object(u.a)({className:g.a.myInput},e),{},{type:"text"}))};var _=function(){var e=Object(c.useContext)(i).setIsAuth;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{className:"login-title",children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"}),Object(d.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(!0),localStorage.setItem("auth","true")},children:[Object(d.jsxs)("div",{className:"login-inputs",children:[Object(d.jsx)(y,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}),Object(d.jsx)(y,{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})]}),Object(d.jsx)(O,{children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},C=n(5),k=n.n(C),w=n(11),N=n(40),S=n(41),M=n(20),I=n.n(M),P=function(){function e(){Object(N.a)(this,e)}return Object(S.a)(e,null,[{key:"getAll",value:function(){var e=Object(w.a)(k.a.mark((function e(){var t,n,c,r=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:10,n=r.length>1&&void 0!==r[1]?r[1]:1,e.next=4,I.a.get("https://jsonplaceholder.typicode.com/posts",{params:{_limit:t,_page:n}});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("https://jsonplaceholder.typicode.com/posts/"+t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCommentsByPostId",value:function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("https://jsonplaceholder.typicode.com/posts/".concat(t,"/comments"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),B=n(42),A=n.n(B);var L=function(){return Object(d.jsx)("div",{className:A.a.loader})},F=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(""),i=Object(s.a)(o,2),u=i[0],j=i[1],l=function(){var t=Object(w.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(!0),t.next=4,e();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),j(t.t0.message);case 9:return t.prev=9,a(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(){return t.apply(this,arguments)}}();return[l,r,u]};var T=function(){var e=Object(f.h)(),t=Object(c.useState)({}),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)([]),i=Object(s.a)(o,2),u=i[0],j=i[1],l=F(Object(w.a)(k.a.mark((function t(){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getById(e.id);case 2:n=t.sent,a(n.data);case 4:case"end":return t.stop()}}),t)})))),b=Object(s.a)(l,3),p=b[0],O=b[1],h=(b[2],F(Object(w.a)(k.a.mark((function t(){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getCommentsByPostId(e.id);case 2:n=t.sent,j(n.data);case 4:case"end":return t.stop()}}),t)}))))),v=Object(s.a)(h,3),x=v[0],m=v[1];return v[2],Object(c.useEffect)((function(){p(e.id),x(e.id)}),[]),Object(d.jsxs)("div",{className:"PostIdPage",children:[Object(d.jsxs)("h2",{className:"comm-post",children:["\u0412\u044b \u043e\u0442\u043a\u0440\u044b\u043b\u0438 \u043f\u043e\u0441\u0442 \u2116 ",e.id]}),O?Object(d.jsx)(L,{}):Object(d.jsxs)("div",{children:[r.id,". ",r.title," "]}),Object(d.jsx)("h2",{className:"comments",children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438:"}),m?Object(d.jsx)(L,{}):Object(d.jsx)("div",{children:u.map((function(e){return Object(d.jsxs)("div",{className:"comment",style:{marginTop:"15px"},children:[Object(d.jsx)("h5",{children:e.email}),Object(d.jsx)("div",{children:e.body})]},e.id)}))})]})},D=n(14);var E=function(e){var t=Object(f.g)();return Object(d.jsxs)("div",{className:"post",children:[Object(d.jsxs)("div",{className:"post__content",children:[Object(d.jsxs)("strong",{children:[e.number,". ",e.post.title]}),Object(d.jsx)("div",{children:e.post.body})]}),Object(d.jsxs)("div",{className:"post__btns",children:[Object(d.jsx)(O,{onClick:function(){return t.push("/posts/".concat(e.post.id))},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}),Object(d.jsx)(O,{onClick:function(){return e.remove(e.post)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})};var q=function(e){var t=e.posts,n=e.title,c=e.remove;return t.length?Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{style:{textAlign:"center"},children:n}),t.map((function(e,t){return Object(d.jsx)(E,{remove:c,number:t+1,post:e},e.id)}))]}):Object(d.jsx)("h1",{style:{textAlign:"center"},children:"\u041f\u043e\u0441\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b!"})};var J=function(e){var t=e.create,n=Object(c.useState)({title:"",body:""}),r=Object(s.a)(n,2),a=r[0],o=r[1];return Object(d.jsxs)("form",{children:[Object(d.jsx)(y,{value:a.title,onChange:function(e){return o(Object(u.a)(Object(u.a)({},a),{},{title:e.target.value}))},type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430"}),Object(d.jsx)(y,{value:a.body,onChange:function(e){return o(Object(u.a)(Object(u.a)({},a),{},{body:e.target.value}))},type:"text",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430"}),Object(d.jsx)(O,{onClick:function(e){e.preventDefault();var n=Object(u.a)(Object(u.a)({},a),{},{id:Date.now()});t(n),o({title:"",body:""})},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})]})},V=n(43),R=n.n(V);var z=function(e){var t=e.options,n=e.defaultValue,c=e.value,r=e.onChange;return Object(d.jsxs)("select",{className:R.a.mySel,value:c,onChange:function(e){return r(e.target.value)},children:[Object(d.jsx)("option",{disabled:!0,value:"",children:n}),t.map((function(e){return Object(d.jsx)("option",{value:e.value,children:e.name},e.value)}))]})};var U=function(e){var t=e.filter,n=e.setFilter;return Object(d.jsxs)("div",{children:[Object(d.jsx)(y,{placeholder:"\u041f\u043e\u0438\u0441\u043a...",value:t.query,onChange:function(e){return n(Object(u.a)(Object(u.a)({},t),{},{query:e.target.value}))}}),Object(d.jsx)(z,{value:t.sort,onChange:function(e){return n(Object(u.a)(Object(u.a)({},t),{},{sort:e}))},defaultValue:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430",options:[{value:"title",name:"\u041f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e"},{value:"body",name:"\u041f\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044e"}]})]})},X=n(21),Y=n.n(X);var G=function(e){var t=e.children,n=e.visible,c=e.setVisible,r=[Y.a.myModal];return n&&r.push(Y.a.active),Object(d.jsx)("div",{onClick:function(){return c(!1)},className:r.join(" "),children:Object(d.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:Y.a.myModalContent,children:t})})},H=function(e,t,n){var r=function(e,t){return Object(c.useMemo)((function(){return t?Object(D.a)(e).sort((function(e,n){return e[t].localeCompare(n[t])})):e}),[t,e])}(e,t);return Object(c.useMemo)((function(){return r.filter((function(e){return e.title.toLowerCase().includes(n.toLowerCase())}))}),[n,r])},K=function(e,t){return Math.ceil(e/t)},Q=function(e){for(var t=[],n=0;n<e;n++)t.push(n+1);return t};var W=function(e){var t=e.totalPages,n=e.page,c=e.changePage,r=Q(t);return Object(d.jsx)("div",{className:"page__wrapper",children:r.map((function(e){return Object(d.jsx)("span",{onClick:function(){return c(e)},className:n===e?"page page__current":"page",children:e},e)}))})};var Z=[{path:"/about",component:v,exact:!0},{path:"/posts",component:function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)({sort:"",query:""}),o=Object(s.a)(a,2),i=o[0],u=o[1],j=Object(c.useState)(!1),l=Object(s.a)(j,2),b=l[0],p=l[1],h=H(n,i.sort,i.query),f=Object(c.useState)(0),v=Object(s.a)(f,2),x=v[0],m=v[1],g=Object(c.useState)(10),y=Object(s.a)(g,2),_=y[0],C=(y[1],Object(c.useState)(1)),N=Object(s.a)(C,2),S=N[0],M=N[1],I=Object(c.useRef)(),B=(Q(x),F(Object(w.a)(k.a.mark((function e(){var t,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAll(_,S);case 2:t=e.sent,r([].concat(Object(D.a)(n),Object(D.a)(t.data))),c=t.headers["x-total-count"],m(K(c,_));case 6:case"end":return e.stop()}}),e)}))))),A=Object(s.a)(B,3),T=A[0],E=A[1],V=A[2];return function(e,t,n,r){var a=Object(c.useRef)();Object(c.useEffect)((function(){n||(a.current&&a.current.disconnect(),a.current=new IntersectionObserver((function(e,n){e[0].isIntersecting&&t&&r()})),a.current.observe(e.current))}),[n])}(I,S<x,E,(function(){M(S+1)})),Object(c.useEffect)((function(){T()}),[S]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(O,{style:{marginTop:"30px"},onClick:function(){return p(!0)},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"}),Object(d.jsx)(G,{visible:b,setVisible:p,children:Object(d.jsx)(J,{create:function(e){r([].concat(Object(D.a)(n),[e])),p(!1)}})}),Object(d.jsx)("hr",{style:{margin:"15px 0"}}),Object(d.jsx)(U,{filter:i,setFilter:u}),V&&Object(d.jsxs)("h1",{children:["\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 ",V]}),Object(d.jsx)(q,{remove:function(e){r(n.filter((function(t){return t.id!==e.id})))},posts:h,title:"\u041f\u043e\u0441\u0442\u044b \u043f\u0440\u043e JS"}),Object(d.jsx)("div",{ref:I}),E&&Object(d.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"50px"},children:Object(d.jsx)(L,{})}),Object(d.jsx)(W,{page:S,changePage:function(e){M(e)},totalPages:x})]})},exact:!0},{path:"/posts/:id",component:T,exact:!0},{path:"/error",component:x,exact:!1}],$=[{path:"/login",component:_,exact:!0}];var ee=function(){var e=Object(c.useContext)(i),t=e.isAuth;return e.isLoading?Object(d.jsx)(L,{}):t?Object(d.jsxs)(f.d,{children:[Z.map((function(e){return Object(d.jsx)(f.b,{component:e.component,path:e.path,exact:e.exact},e.path)})),Object(d.jsx)(f.a,{to:"/posts"})]}):Object(d.jsxs)(f.d,{children:[$.map((function(e){return Object(d.jsx)(f.b,{component:e.component,path:e.path,exact:e.exact},e.path)})),Object(d.jsx)(f.a,{to:"/login"})]})};var te=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!0),u=Object(s.a)(a,2),j=u[0],l=u[1];return Object(c.useEffect)((function(){localStorage.getItem("auth")&&r(!0),l(!1)}),[]),Object(d.jsx)(i.Provider,{value:{isAuth:n,setIsAuth:r,isLoading:j},children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(h,{}),Object(d.jsx)(ee,{})]})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};a.a.render(Object(d.jsx)(te,{}),document.getElementById("root")),ne()}},[[78,1,2]]]);
//# sourceMappingURL=main.f54ba8ed.chunk.js.map